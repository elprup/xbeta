{"id":767,"date":"2009-05-30T11:28:24","date_gmt":"2009-05-30T03:28:24","guid":{"rendered":"http://xbeta.info/?p=767"},"modified":"2009-05-30T11:28:24","modified_gmt":"2009-05-30T03:28:24","slug":"tc-pinyin-quicksearch","status":"publish","link":"https://xbeta.info/tc-pinyin-quicksearch.htm","title":{"rendered":"拼音首字母: 超方便的Total Commander 7.5快速搜索功能"},"content":{"rendered":"<p id=\"z-qsext\" style=\"color: #ff0000;\">【2012-05-22 更新】TC拼音首字母搜索功能，或者说，TC本身的快速搜索功能，早就一统江湖，只是这里没有更新。新王者就是—— <a href=\"http://www.totalcmd.net/plugring/Google_like_QS.html\"><strong>QuickSearch eXtended</strong></a> 。它相当于 Shanny 的拼音首字母搜索，加 Google 的空格/模糊搜索。</span></p>\n<p>&#8212;- 以下是 2009-05-30 旧文 &#8212;</p>\n<p>最新发布的 Total Commander 7.50 Beta 4 加上新发布的 PinYinQuickSearch插件，为中文用户带来了新的快速搜索体验：<strong>输入拼音首字母，即可定位到对应的中文目录/文件；改造之后，还可支持五笔等其他编码。</strong>这是 TC7.5 在快速搜索方面，继支持中文输入后的又一重大更新。这一过程，是TC作者与中文用户及中文化开发者良好互动的结果。当用户尊重作者、支持作者时，作者就不会忽视用户的需求。<a href=\"http://xbeta.info/tc-pinyin-quicksearch.htm#thanks\">感谢这些人</a>，让我们一起善用TC。</p>\n<h2>1. 如何体验 TC7.5 的快速搜索拼音首字母功能？</h2>\n<p>首先，请下载最新发布的 Total Commander 7.50 Beta 4（<a href=\"http://fileforum.betanews.com/detail/Total-Commander_Beta/945901171/2\">官方认可下载</a>）并升级安装。<br />\n然后，请下载 Shanny 修正的<a href=\"http://www.shanny.com.cn/download/PinYinQuickSearch_fixed_by_shanny.zip\">PinYinQuickSearch_fixed_by_shanny.zip</a>）。<br />\n接下来，请在TC中（而不要在压缩软件中）双击 PinYinQuickSearch.zip，就会自动安装此插件（如下图）。<br />\n<img decoding=\"async\" src=\"http://img41.imageshack.us/img41/3307/i78.png\" alt=\"[image:PinYinQuickSearch]\" /><br />\n最后，你就可以体验 QuickSearch 的拼音首字母匹配中文的功能了。如下图所示，输入hs，TC就匹配到了文件“史记汉书研究概述.htm”中的“汉书”。<br />\n<img decoding=\"async\" src=\"http://img35.imageshack.us/img35/4762/i82.png\" alt=\"[image:quick search tc pinyin]\" /></p>\n<h2 id=\"wubi\">1+ 补充：改造码表，让QuickSearch支持五笔首码</h2>\n<p>PinYinQuickSearch（拼音首字母快速搜索）的核心是 tcmatch.dll（功能）和 tcmatch.tbl（码表）。目前的码表是TC作者根据<a href=\"http://kanji.zinbun.kyoto-u.ac.jp/~yasuoka/ftp/CJKtable/Uni2Pinyin.Z\">某汉字拼音编码</a>制作。其实，我们完全可以修改此编码，让TC快速搜索不仅支持拼音首字母，也可以支持其他编码（比如双拼、五笔、二笔）的首字母。</p>\n<p>以五笔为例，步骤如下：</p>\n<p>&#8211; 下载原始码表<a href=\"http://kanji.zinbun.kyoto-u.ac.jp/~yasuoka/ftp/CJKtable/Uni2Pinyin.Z\">Uni2Pinyin.Z</a>（约97KB），用7-Zip（或其他解压软件）解压出 Uni2Pinyin （约212KB）到 TC 安装目录，并改名为 tcmatch.txt。<br />\n&#8211; 用文本编辑器打开 tcmatch.txt，可以看到前几行是文件说明，后面是数据行。<br />\n&#8211; 找到 “8BD5 shi4”（不包括引号，下同）。这一行的意思是，unicode编码8BD5（即汉字“试”）的拼音为 shi，第4声。为了支持五笔，我们要增加五笔编码。同时为了格式一致（或许程序会进行校验），在五笔编码后面也增加一个数字代表声调。<br />\n&#8211; 即，“试”字原对应“8BD5 shi4”，现改为 “8BD5 shi4 yaa4”。（注意，tab作为分割符）<br />\n&#8211; 同理，修改其他字符：<br />\n6d4b ce4 imj4 （测）<br />\n5584 shan4 uduk4（善）<br />\n7528 yong4 et4（用）<br />\n4F73 jia1 wffg1（佳）<br />\n8F6F ruan3 lqw3（软）<br />\n&#8211; 保存tcmatch.txt。<br />\n&#8211; 退出TC。<br />\n&#8211; 删除TC目录下的旧码表 tcmatch.tbl。<br />\n&#8211; 重新启动TC，并开始使用快速搜索的中文功能，此时，插件会基于新的tcmatch.txt，重新编译tcmatch.tbl。<br />\n&#8211; 新建“测试”、“善用佳软”，会发现无论键入&#8221;cs&#8221;（拼音缩写）或&#8221;iy&#8221;（五笔缩写）都能匹配“测试”，键入“wl”也能匹配“善用佳软”。<br />\n<img decoding=\"async\" src=\"http://img189.imageshack.us/img189/883/25655283.png\" alt=\"[image: TC quick search支持五笔]\" /></p>\n<h2>2. 更多讨论</h2>\n<h3>2.1 什么是快速搜索(quick search)？</h3>\n<p>我认为quick search 译为“快速搜索”并不十分贴切。至少把“快速”换为“快捷”会更加恰当。<br />\n传统的文件搜索，是确定某文件所在的目录。而quick search则不仅是搜索，而是基于搜索实现“定位、突出、过滤”。举例来说，在 d 盘搜索 abc.txt，结果会出现在一个新窗口中，列出：<br />\nd:/folder-1/folder-2/&#8230;./abc.txt<br />\nd:/folder-x/&#8230;/folder-z/abc.txt<br />\n……<br />\n如果你需要处理这些文件，就要再在文件管理器中转到这些目录中，定位到这些文件上。<br />\n而quick search，则让“搜索”和“手工定位”合二为一。当你在quick search中键入abc.txt时，文件管理器直接显示出这些目标文件（过滤掉不匹配内容），或焦点直接跳转到该文件，并高亮显示。<br />\nquick search是现代人机交互的潮流，从我的理解，可以总结为<strong>“基于搜索，并能实时地定位、突出搜索结果，或过滤掉搜索结果之外的内容”</strong>。EverNote、Vim用户都会对此有深刻理解和体验。</p>\n<h3>2.2 Total Commander的Quick Search改进之路</h3>\n<p>TC 7.0 开始支持“文件名精确匹配(N)”模式，包括：- 开头(文件名必须以第一个输入字符开始)(B)；- 结尾(文件名中句点前所有字符必须与输入字符一致)(D)。如果都不选，意味着“任意位置匹配”——这才是改进所在。<br />\n由于不支持中文，Shanny开发了 <a href=\"http://shanny.com.cn/quicksearchpro/\">QuickSearchPro</a>，受到了中文用户的好评。<br />\nTC 7.5 开始支持中文搜索，并且迅速推出了 PinYinQuickSearch 插件。此插件是开源方式，并且是开放架构，实际上，每种语言、每种输入法，都可以基于此，制作相应的quick search插件。</p>\n<p>TC是经典，并不意味着它一直是领先、始创。恰恰相反，越是成熟的软件在转型期的挑战就越复杂。TC7.5 才实现了quick search完全支持中文，而Free Commander早就支持Unicode了。但之所以能成为经典，就是落后时能扎扎实实改进，领先时仍能精益求精。TC 的上述历程，以及背后的点滴故事，就是最好的注解。</p>\n<h3 id=\"thanks\">2.3 致谢与论坛相关讨论</h3>\n<p>英文软件如此个性化的支持中文，要感谢这些人：</p>\n<ul>\n<li>&#8211; Ghisler：令人敬佩的TC作者。</li>\n<li>&#8211; Shanny：QuickSearchPro的作者。在TC未实现此功能之前，先通过独立程序帮助TC做到了这一点，在中文用户中引入了这一应用习惯。并且，得知TC官方表示引入此功能后，Shanny表示可以提供其代码或进行其他帮助。</li>\n<li>&#8211; cheming等网友。网友QuickSearch留言补充：<br />\n『更正一下，其实在Ghisler支持中文首字母快搜功能上，有一个人是功不可没的，那就是cheming。看看Ghisler的回复以及他们之间的对话就知道。<br />\nSun May 31, 2009 8:28 am：Nice to hear that! Thanks very much for your useful hints, I couldn&#8217;t have added it without your help. [<a href=\"http://www.ghisler.ch/board/viewtopic.php?t=22112&amp;start=30\">via</a>]<br />\nGhisler之前对何为拼音一窍不通，正式上面提到的cheming耐心解答才使Ghisler逐步明白此功能对中国人的意义，并受到其提供的网络资料启发，将此功能逐步完善的。』<br />\n当然，还有其他网友在官方论坛对TC beta版进行测试、bug反馈、并帮助作者理解中文、拼音、多音字……</li>\n<li>&#8211; 而Ghisler（瑞士）所用的中文拼音码表（Unicode Pinyin table）则是来自于Koichi Yasuoka（日本），此码表中又提到了另外4位来自德国、美国、澳大利亚、日本的朋友。看，这就是开源和开放给我们带来的好处！</li>\n</ul>\n<p>水木社区：<br />\n<a href=\"http://www.newsmth.net/bbstcon.php?board=TotalCommander&amp;gid=39168\">QuickSearchPro不会再更新了</a><br />\n<a href=\"http://www.newsmth.net/bbstcon.php?board=TotalCommander&amp;gid=39217\">TC quicksereach pro 官方版</a><br />\n<a href=\"http://www.newsmth.net/bbstcon.php?board=TotalCommander&amp;gid=39254\">QuickSearch Pro 官方版修正</a><br />\nTC论坛：<br />\n<a href=\"http://ghisler.ch/board/viewtopic.php?t=22528&amp;start=0&amp;postdays=0&amp;postorder=asc&amp;highlight=\">Quick search for Chinese characters</a></p>\n<blockquote><p>发信人: shanny (潇风·失过业，完整了), 信区: TotalCommander<br />\n标 题: QuickSearchPro不会再更新了<br />\n发信站: 水木社区 (Wed May 27 10:24:24 2009), 站内</p>\n<p>这是坏消息，<br />\n还有一个好消息</p>\n<p>TC会内部支持类似功能，很可能在7.50b4实现，<br />\n一起期待吧</p></blockquote>\n<blockquote><p>发信人: shanny (潇风·失过业，完整了), 信区: TotalCommander<br />\n标 题: Re: QuickSearchPro不会再更新了<br />\n发信站: 水木社区 (Wed May 27 11:27:59 2009), 站内</p>\n<p>没错，会添加 wcmd_chn.dll 来支持中文查找<br />\n这是最好的解决方案了，比外加的addon好得多<br />\ncjk作者都会支持的<br />\n接口公开，而且相关代码开源</p>\n<p>【 在 xuanqing (玄清|黑白猫熊@静若处子动如光) 的大作中提到: 】<br />\n: 就是说会用内置的dll之类的方法支持不同非英语言的快速查找么?</p></blockquote>\n<h3>3. Total Commander 7.50 Beta 4 更新记录</h3>\n<p>官网介绍见<a href=\"http://www.ghisler.com/750beta4.htm\">http://www.ghisler.com/750beta4.htm</a>。<br />\n28.05.09 Release Total Commander 7.50 Public Beta 4<br />\n28.05.09 Fixed: When a disconnected network drive was reconnected, the drive&#8217;s icon wasn&#8217;t refreshed in the drive dropdown list<br />\n27.05.09 Fixed: Shift+Cursor up/down in drive dropdown list selected file in file list<br />\n27.05.09 Fixed: Access violation in icon thread when closing TC with open separate tree (fix should also improve the general stability)<br />\n27.05.09 Fixed: Multi-rename tool, branch view: When sorting by name, keep sort order from main window (sort just by name, not by relative path+name)<br />\n27.05.09 Fixed: Function to save current selection could crash with file names longer than 511 characters (e.g. in branch view)<br />\n27.05.09 Fixed: Quick filter wasn&#8217;t removed when user opened a new tab by Ctrl+clicking on a button (or Shift+Enter in Ctrl+D menu) when command &#8220;cd xyz&#8221; was pointing to a file<br />\n27.05.09 Fixed: Yes/No button in copy to dir warning dialog not translated<br />\n26.05.09 Fixed: Mouse wheel no longer worked in Lister></iframe></p>\n","protected":false},"excerpt":{"rendered":"<p>【2012-05-22 更新】TC拼音首字母搜索功能，或者说，TC本身的快速搜索功能，早就一统江湖，只是这里没 [&hellip;]</p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":["未分类","系统工具"],"tags":["Total Commander","all"],"_links":{"self":[{"href":"https://xbeta.info/wp-json/wp/v2/posts/767"}],"collection":[{"href":"https://xbeta.info/wp-json/wp/v2/posts"}],"about":[{"href":"https://xbeta.info/wp-json/wp/v2/types/post"}],"author":[{"embeddable":true,"href":"https://xbeta.info/wp-json/wp/v2/users/2"}],"replies":[{"embeddable":true,"href":"https://xbeta.info/wp-json/wp/v2/comments?post=767"}],"version-history":[{"count":0,"href":"https://xbeta.info/wp-json/wp/v2/posts/767/revisions"}],"wp:attachment":[{"href":"https://xbeta.info/wp-json/wp/v2/media?parent=767"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https://xbeta.info/wp-json/wp/v2/categories?post=767"},{"taxonomy":"post_tag","embeddable":true,"href":"https://xbeta.info/wp-json/wp/v2/tags?post=767"}],"curies":[{"name":"wp","href":"https://api.w.org/{rel}","templated":true}]},"wp_type":"post"}